## **1. Настройка Git**
| Команда | Описание |
|---------|----------|
| `git config --global user.name "Ваше имя"` | Установка имени пользователя |
| `git config --global user.email "ваш@email.com"` | Установка email |
| `git config --global --list` | Показать текущие настройки |
| `git config --global core.editor "code --wait"` | Установка редактора (VS Code) |

---

## **2. Создание и клонирование репозитория**
| Команда | Описание |
|---------|----------|
| `git init` | Инициализация нового репозитория |
| `git clone <URL-репозитория>` | Клонировать удалённый репозиторий |
| `git clone --branch <ветка> <URL>` | Клонировать определённую ветку |

---

## **3. Основные команды для работы с файлами**
| Команда | Описание |
|---------|----------|
| `git status` | Показать состояние файлов (изменённые, новые, удалённые) |
| `git add <файл>` | Добавить файл в индекс (staging) |
| `git add .` | Добавить **все** изменённые файлы |
| `git rm <файл>` | Удалить файл и добавить изменение в Git |
| `git mv <старое_имя> <новое_имя>` | Переименовать файл |
| `git restore <файл>` | Отменить изменения в файле (до последнего коммита) |
| `git restore --staged <файл>` | Убрать файл из индекса (но сохранить изменения) |

---

## **4. Коммиты**
| Команда | Описание |
|---------|----------|
| `git commit -m "Сообщение"` | Создать коммит с сообщением |
| `git commit -am "Сообщение"` | Добавить все изменения и сделать коммит (без `git add`) |
| `git commit --amend` | Изменить последний коммит (сообщение или файлы) |
| `git log` | Показать историю коммитов |
| `git log --oneline` | Краткая история коммитов |
| `git log --graph` | История с визуализацией веток |
| `git show <хэш-коммита>` | Показать изменения в коммите |

---

## **5. Ветки (Branching)**
| Команда | Описание |
|---------|----------|
| `git branch` | Показать все ветки (текущая выделена `*`) |
| `git branch <имя-ветки>` | Создать новую ветку |
| `git checkout <ветка>` | Переключиться на ветку |
| `git switch <ветка>` | Альтернатива `checkout` (Git 2.23+) |
| `git checkout -b <новая-ветка>` | Создать и переключиться на ветку |
| `git merge <ветка>` | Влить ветку в текущую |
| `git branch -d <ветка>` | Удалить ветку (если она слита) |
| `git branch -D <ветка>` | Принудительно удалить ветку |
| `git rebase <ветка>` | Перебазировать текущую ветку |

---

## **6. Работа с удалённым репозиторием (GitHub, GitLab, etc.)**
| Команда | Описание |
|---------|----------|
| `git remote add origin <URL>` | Добавить удалённый репозиторий |
| `git remote -v` | Показать список удалённых репозиториев |
| `git push origin <ветка>` | Отправить изменения в удалённый репозиторий |
| `git push -u origin main` | Отправить и установить связь с веткой |
| `git pull origin <ветка>` | Загрузить изменения с удалённого репозитория |
| `git fetch` | Загрузить изменения без слияния |
| `git push --force` | Принудительная отправка (перезапись истории) ⚠️ |
| `git clone --depth 1 <URL>` | Клонировать без истории (только последний коммит) |

---

## **7. Отмена изменений и отладка**
| Команда | Описание |
|---------|----------|
| `git reset --hard HEAD` | Откатить **все** изменения до последнего коммита |
| `git reset --hard <хэш-коммита>` | Откатить до определённого коммита (⚠️ удалит новые коммиты!) |
| `git revert <хэш-коммита>` | Отменить изменения коммита (создаёт новый коммит) |
| `git stash` | Временно сохранить изменения без коммита |
| `git stash pop` | Вернуть сохранённые изменения |
| `git diff` | Показать изменения в файлах |
| `git blame <файл>` | Показать, кто менял файл построчно |

---

## **8. Полезные команды**
| Команда | Описание |
|---------|----------|
| `git tag v1.0.0` | Создать тег (версию) |
| `git push --tags` | Отправить теги на удалённый репозиторий |
| `git cherry-pick <хэш-коммита>` | Перенести коммит из другой ветки |
| `git reflog` | Показать историю всех действий (для восстановления) |
| `git clean -df` | Удалить неотслеживаемые файлы и папки |

---

## **9. Типовой рабочий процесс**
1. **Создание и клонирование репозитория**  
   ```bash
   git clone https://github.com/user/project.git
   cd project
   ```

2. **Создание новой ветки**  
   ```bash
   git checkout -b feature/new-login
   ```

3. **Добавление изменений и коммит**  
   ```bash
   git add .
   git commit -m "Добавлена форма входа"
   ```

4. **Отправка на GitHub**  
   ```bash
   git push origin feature/new-login
   ```

5. **Слияние через Pull Request (GitHub) / Merge Request (GitLab)**  
   ```bash
   git checkout main
   git pull origin main
   git merge feature/new-login
   git push origin main
   ```

---

## **10. Основные системы маркировки веток**
### **10.1 По типу работы (Git Flow / GitHub Flow)**
| Префикс  | Назначение | Пример |
|----------|------------|--------|
| `feature/` | Новая функциональность | `feature/user-auth` |
| `bugfix/` | Исправление бага | `bugfix/login-error` |
| `hotfix/` | Срочное исправление в продакшене | `hotfix/payment-500` |
| `release/` | Подготовка к релизу | `release/v1.2.0` |
| `docs/`   | Изменения в документации | `docs/api-update` |
| `refactor/` | Рефакторинг без новых функций | `refactor/auth-service` |
| `test/`   | Тесты или CI/CD изменения | `test/coverage` |

### **10.2 По номеру задачи (Jira, Trello)**
```bash
git checkout -b task/JIRA-123-add-login
git checkout -b issue/45-fix-npe
```

### **10.3 По имени разработчика (для индивидуальных проектов)**
```bash
git checkout -b john/refactor-db
```

---

## **11. Правила именования**
- **Используйте нижний регистр** и `kebab-case` (дефисы вместо пробелов):
  ```bash
  # Хорошо
  git checkout -b feature/secure-login
  
  # Плохо
  git checkout -b Feature/SecureLogin
  ```
- **Добавляйте контекст** (модуль/сервис):
  ```bash
  git checkout -b feature/auth-2fa
  git checkout -b bugfix/checkout-payment
  ```
- **Избегайте общих названий** вроде `fix` или `update`:
  ```bash
  # Хорошо
  git checkout -b bugfix/header-overflow
  
  # Плохо
  git checkout -b fix
  ```

---

## **12. Как маркировать ветки в удалённом репозитории (GitHub/GitLab)**
1. **Создайте ветку локально** и отправьте её на сервер:
   ```bash
   git checkout -b feature/dark-mode
   git push -u origin feature/dark-mode
   ```
2. **Свяжите ветку с задачей** (если используется Jira/GitHub Issues):
   - В GitHub: укажите номер Issue в названии (`feature/#42-dark-mode`).
   - В GitLab: используйте `[ci skip]` или теги в описании коммита.

---

## **13. Автоматизация маркировки**
### **13.1 Git Hooks**
Добавьте проверку именования в `.git/hooks/pre-commit`:
```bash
#!/bin/sh
branch=$(git branch --show-current)
if ! [[ $branch =~ ^(feature|bugfix|hotfix)/[a-z0-9-]+$ ]]; then
  echo "ERROR: Branch name must follow pattern 'type/description'!"
  exit 1
fi
```

### **13.2 CI/CD проверки**
Пример для `.gitlab-ci.yml`:
```yaml
validate_branch:
  script:
    - |
      if [[ ! "$CI_COMMIT_REF_NAME" =~ ^(feature|bugfix|hotfix)/[a-z0-9-]+$ ]]; then
        echo "Invalid branch name!"
        exit 1
      fi
```

---

## **14. Удаление устаревших веток**
После мерджа в `main`:
```bash
# Удалить локальную ветку
git branch -d feature/login

# Удалить ветку на сервере
git push origin --delete feature/login
```

---

## **15. Популярные стандарты**
- **Git Flow** – строгое разделение на `feature/`, `release/`, `hotfix/`.
- **GitHub Flow** – только `feature/` + `main`.
- **Trunk-Based Development** – короткоживущие ветки (максимум 1-2 дня).

---

| Ситуация | Шаблон имени |
|----------|--------------|
| Новая функция | `feature/краткое-описание` |
| Исправление бага | `bugfix/описание-ошибки` |
| Экстренный фикс | `hotfix/описание` |
| Документация | `docs/тема` |

